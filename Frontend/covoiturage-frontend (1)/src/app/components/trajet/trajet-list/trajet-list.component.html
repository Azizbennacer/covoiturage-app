<div class="trajets-container">
  <button (click)="ouvrirBoiteMail()" class="btn-consulter-mail">Consulter la boîte mail</button>

  <h2>Mes Trajets Proposés</h2>

  <table *ngIf="trajets && trajets.length > 0; else noTrajets" class="trajets-table">
    <thead>
      <tr>
        <th>Ville départ</th>
        <th>Ville arrivée</th>
        <th>Date</th>
        <th>Places</th>
        <th>Prix</th>
        <th>Type voiture</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let trajet of trajets">
        <td>{{ trajet.villeDepart }}</td>
        <td>{{ trajet.villeArrivee }}</td>
        <td>{{ trajet.dateTrajet | date:'dd/MM/yyyy HH:mm' }}</td>
        <td>{{ trajet.nbPlaces }}</td>
        <td>{{ trajet.prix }} TND</td>
        <td>{{ trajet.typeVoiture }}</td>
        <td class="actions">
          <button (click)="modifierTrajet(trajet)">Modifier</button>
          <button (click)="supprimerTrajet(trajet.id)" class="delete-btn">Supprimer</button>
        </td>
      </tr>
    </tbody>
  </table>

  <ng-template #noTrajets>
    <p class="no-trajet-message">Aucun trajet proposé pour le moment.</p>
  </ng-template>
</div>

<!-- Pop-up de modification -->
<div class="popup-container" *ngIf="showEditPopup">
  <div class="popup">
    <h2>Modifier le trajet</h2>
    <form (ngSubmit)="validerModification()">
      <div class="form-group">
        <label for="villeDepart">Ville de départ</label>
        <input type="text" id="villeDepart" [(ngModel)]="trajetEnCours.villeDepart" name="villeDepart" required />
      </div>

      <div class="form-group">
        <label for="villeArrivee">Ville d'arrivée</label>
        <input type="text" id="villeArrivee" [(ngModel)]="trajetEnCours.villeArrivee" name="villeArrivee" required />
      </div>

      <div class="form-group">
        <label for="dateTrajet">Date du trajet</label>
        <input type="datetime-local" id="dateTrajet" [(ngModel)]="trajetEnCours.dateTrajet" name="dateTrajet" required />
      </div>

      <div class="form-group">
        <label for="nbPlaces">Nombre de places</label>
        <input type="number" id="nbPlaces" [(ngModel)]="trajetEnCours.nbPlaces" name="nbPlaces" required min="1" />
      </div>

      <div class="form-group">
        <label for="prix">Prix (TND)</label>
        <input type="number" id="prix" [(ngModel)]="trajetEnCours.prix" name="prix" required min="0" step="0.1" />
      </div>

      <div class="form-group">
        <label for="typeVoiture">Type de voiture</label>
        <input type="text" id="typeVoiture" [(ngModel)]="trajetEnCours.typeVoiture" name="typeVoiture" required />
      </div>

      <div class="button-group">
        <button type="submit">Valider</button>
        <button type="button" (click)="fermerPopup()">Fermer</button>
      </div>
    </form>
  </div>
</div>


