<div class="messages-container">
  <h2>Messages reçus</h2>

  <div *ngIf="messages.length === 0" class="no-messages">
    Aucun message reçu.
  </div>

  <ul *ngIf="messages.length > 0" class="message-list">
    <li *ngFor="let msg of messages" class="message-item">
      <div class="message-header">
        <span class="expediteur">De : {{ msg.expediteur.nom }}</span>
        <span class="date-envoi">{{ msg.dateEnvoi | date : "short" }}</span>
      </div>
      <div class="message-content">
        {{ msg.contenu }}
      </div>
      <button class="btn-submit" (click)="ouvrirPopupReponse(msg)">Répondre</button>
    </li>
  </ul>
</div>

<!-- ✅ Pop-up de messagerie -->

<div class="popup-container" *ngIf="showMessagePopup">
  <div class="popup">
    <form (ngSubmit)="envoyerMessage()">
      <div class="form-group">
        <label for="message"
          >Envoyer un message à {{ nomConducteurPourMessage }}</label
        >
        <textarea
          id="message"
          name="message"
          [(ngModel)]="messageEnCours"
          required
          rows="5"
          placeholder="Écrivez votre message ici..."
        ></textarea>
      </div>

      <div class="btn-group">
        <button type="submit" class="btn-submit">Envoyer</button>
        <button
          type="button"
          class="btn-close"
          (click)="fermerPopupMessagerie()"
        >
          Fermer
        </button>
      </div>
    </form>
  </div>
</div>
