{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet HomeComponent = class HomeComponent {\n  constructor(router, authService // <-- injecter ici\n  ) {\n    this.router = router;\n    this.authService = authService;\n    this.showLoginPopup = false;\n    this.showSignupPopup = false;\n    this.showSuccessMessage = false;\n    this.successMessage = '';\n  }\n  ngOnInit() {\n    this.closeAllPopups();\n  }\n  openPopupConnexion() {\n    this.showLoginPopup = true;\n    this.showSignupPopup = false;\n  }\n  openPopupInscription() {\n    this.showLoginPopup = false;\n    this.showSignupPopup = true;\n  }\n  closeAllPopups() {\n    this.showLoginPopup = false;\n    this.showSignupPopup = false;\n  }\n  submitLogin(event) {\n    event.preventDefault();\n    const form = event.target;\n    const formData = new FormData(form);\n    const email = formData.get('user-id');\n    const mot_de_passe = formData.get('password');\n    if (email && mot_de_passe) {\n      // appel à la méthode connexion du service\n      this.authService.connexion(email, mot_de_passe).subscribe({\n        next: user => {\n          this.closeAllPopups();\n          this.successMessage = 'Connexion réussie !';\n          this.showSuccessMessage = true;\n          setTimeout(() => {\n            this.router.navigate(['/home2']);\n          }, 2000);\n        },\n        error: err => {\n          this.closeAllPopups();\n          this.successMessage = 'Email ou mot de passe invalide !';\n          this.showSuccessMessage = true;\n        }\n      });\n    } else {\n      this.closeAllPopups();\n      this.successMessage = 'Tous les champs sont requis !';\n      this.showSuccessMessage = true;\n    }\n  }\n  submitSignup(event) {\n    event.preventDefault();\n    const form = event.target;\n    const formData = new FormData(form);\n    const email = formData.get('email');\n    const nom = formData.get('username');\n    const mot_de_passe = formData.get('password');\n    if (email && nom && mot_de_passe) {\n      // appel à la méthode inscription du service\n      this.authService.inscription({\n        email,\n        nom,\n        mot_de_passe\n      }).subscribe({\n        next: () => {\n          this.closeAllPopups();\n          this.successMessage = 'Inscription réussie !';\n          this.showSuccessMessage = true;\n          setTimeout(() => {\n            this.router.navigate(['/home2']);\n          }, 2000);\n        },\n        error: () => {\n          this.closeAllPopups();\n          this.successMessage = 'Erreur lors de l\\'inscription.';\n          this.showSuccessMessage = true;\n        }\n      });\n    } else {\n      this.closeAllPopups();\n      this.successMessage = 'Tous les champs sont requis !';\n      this.showSuccessMessage = true;\n    }\n  }\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})], HomeComponent);\nexport { HomeComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}