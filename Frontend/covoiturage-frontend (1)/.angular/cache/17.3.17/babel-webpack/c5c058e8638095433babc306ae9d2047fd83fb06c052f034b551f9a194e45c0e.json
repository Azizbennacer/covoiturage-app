{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet RechercheResultatsComponent = class RechercheResultatsComponent {\n  constructor(route, trajetService) {\n    this.route = route;\n    this.trajetService = trajetService;\n    this.resultats = [];\n    this.showMessagePopup = false;\n    this.destinataireNom = '';\n    this.messageEnCours = '';\n    this.messageTexte = '';\n    this.nomConducteurPourMessage = '';\n  }\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      const {\n        villeDepart,\n        villeArrivee,\n        date\n      } = params;\n      if (villeDepart && villeArrivee && date) {\n        const recherche = {\n          villeDepart,\n          villeArrivee,\n          date\n        };\n        this.trajetService.rechercherTrajets(recherche).subscribe({\n          next: data => this.resultats = data,\n          error: err => console.error('Erreur recherche trajet', err)\n        });\n      }\n    });\n  }\n  contacterConducteur(trajet) {\n    this.trajetPourMessage = trajet;\n    this.nomConducteurPourMessage = trajet.conducteur?.nom || 'Conducteur';\n    this.showMessagePopup = true;\n  }\n  ouvrirPopupMessagerie(trajet) {\n    this.trajetPourMessage = trajet;\n    console.log(\"Nom du conducteur :\", trajet.conducteur?.nom);\n    this.messageEnCours = '';\n    this.showMessagePopup = true;\n  }\n  fermerPopupMessagerie() {\n    this.showMessagePopup = false;\n  }\n  envoyerMessage() {\n    if (!this.messageEnCours.trim()) {\n      alert(\"Le message ne peut pas être vide\");\n      return;\n    }\n    console.log(\"Message envoyé à :\", this.trajetPourMessage.conducteur?.email);\n    console.log(\"Contenu :\", this.messageEnCours);\n    alert(\"Message envoyé !\");\n    this.fermerPopupMessagerie();\n  }\n  fermerPopup() {\n    this.showMessagePopup = false;\n    this.messageTexte = '';\n  }\n};\nRechercheResultatsComponent = __decorate([Component({\n  selector: 'app-resultats-recherche',\n  templateUrl: './recherche-cov.component.html',\n  styleUrls: ['./recherche-cov.component.css']\n})], RechercheResultatsComponent);\nexport { RechercheResultatsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}